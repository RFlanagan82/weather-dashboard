<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Weather Dashboard</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <link
        rel="stylesheet"
        href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
        crossorigin="anonymous"/>
        <link rel="stylesheet" href="./style.css">
    </head>
    <body>
        <div class="jumbotron">
            <h1 class="display-4">Weather Dashboard</h1>
          </div>
        <div class="container">
            <div class="row">
                <div class="col-sm-4 city-index">
                    <p>Search for a City:</p>
                    <!--This form will be where users input city selection-->
                    <form id = "city-form">
                        <input type="text" id="cityinput">
                        <!--Button triggers new city to be searched-->
                        <button class ="searchBtn">
                            <i class="fas fa-search"></i> 
                        </button>
                    </form>
                    <!--Searched Cities will get dumped here.-->
                    <ul id= "citiesList"></ul>
                </div>
                <div class="col-sm-8 border city-stats">
                    <!-- Retrieved data will be dumped here -->
                    <!--Our Divs are already available here to be appended starting on line 30.-->
                    <h3 class="cityName"></h3>
                    <h3 class="current-day"></h3>
                    <ul class= "city-details">
                        <div class= "temp"></div>
                        <div class= "humidity"></div>
                        <div class= "wind"></div>
                        <div class= "uv-index"></div>
                    </ul>
                </div>
            </div>
        </div>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
        <script type="text/javascript">

            // This is my API key.
            var APIKey = "6ea08e9662671517b8781da78c3e36a4";

            var cityInput;

            
            //WHEN I search for a city

            //The city from the textbox is then added to our array
            
            var savedCity = [];

            function searchCity() {
            var cityInput = $("#cityinput").val();
            console.log(cityInput);

            //Here is the URL I need to query the Open Weather Map.org site
            var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" + cityInput + "&appid=6ea08e9662671517b8781da78c3e36a4" + "&units:imperial"; //need to make city name dynamic.

            //THEN I am presented with current and future conditions for that city and that city is added to the search history

            $.ajax({
            url: queryURL,
            method: "GET"
            }).then(function(response) {

                //DOM Elements
                console.log(response);

                console.log(queryURL);
                
                var cityNameEl = $(".cityName").text(response.name + " " + "(" + moment().format('l') + ")");
                
                var tempEl = $(".temp").text("Temperature: " + response.main.temp + " F");
                var humidityEl = $(".humidity").text("Humidity: " + response.main.humidity + "%");
                var windEl = $(".wind").text("Wind speed: " + response.wind.speed + " MPH");
                //var uvIndexEl = (".uv-index"); Need to figure out how to get UV data
    
                });
                savedCity.push(cityInput);
                console.log(savedCity);
                localStorage.setItem(cityInput, savedCity);
            };



            //Create add event listener for search button when clicked

            $(".searchBtn").on("click", function(event) {
                event.preventDefault();
                searchCity();
                
            });
            
            //This line will grab the text from the city input box
            

            


            
            


            //WHEN I view current weather conditions for that city
            //THEN I am presented with the city name, the date, an icon representation of weather conditions, the temperature, the humidity, the wind speed, and the UV index
            


            
            
            //WHEN I view the UV index
            //THEN I am presented with a color that indicates whether the conditions are favorable, moderate, or severe
            
            


            //WHEN I view future weather conditions for that city
            //THEN I am presented with a 5-day forecast that displays the date, an icon representation of weather conditions, the temperature, and the humidity
            
            
            //WHEN I click on a city in the search history
            //THEN I am again presented with current and future conditions for that city
            
            
            
            
            //WHEN I open the weather dashboard
            //THEN I am presented with the last searched city forecast
            
        
        
        
        
        </script>


    </body>
</html>